[gd_scene load_steps=38 format=4 uid="uid://bahgcomgdwvko"]

[ext_resource type="PackedScene" uid="uid://dwapdsx6u217o" path="res://src/world/common/scene/scene.tscn" id="1_bd5sf"]
[ext_resource type="PackedScene" uid="uid://tem7qe8rdwgl" path="res://src/character/styles/base/eye_l_base.tscn" id="2_6pr31"]
[ext_resource type="PackedScene" uid="uid://do5c1yd8gj6ts" path="res://src/world/levels/07_scorched_complex/menus/elevator/elevator_menu.tscn" id="2_8nbbm"]
[ext_resource type="PackedScene" uid="uid://deqdhg7d7px4r" path="res://src/character/styles/base/eye_r_base.tscn" id="3_j6ye8"]
[ext_resource type="PackedScene" uid="uid://b5nv4hta6iqmd" path="res://src/world/levels/07_scorched_complex/logic/stealth/game_over/death_by_flying_ghost.tscn" id="3_q2oid"]
[ext_resource type="PackedScene" uid="uid://c4qqlg68xrjw2" path="res://src/world/levels/07_scorched_complex/logic/stealth/game_over/death_by_walking_ghost.tscn" id="4_evmve"]
[ext_resource type="PackedScene" uid="uid://dfj53lpxv6wc8" path="res://src/character/styles/base/hand_l_base.tscn" id="4_g1v1q"]
[ext_resource type="PackedScene" uid="uid://c7xsd06q4xeea" path="res://src/character/styles/base/hand_r_base.tscn" id="5_jqugv"]
[ext_resource type="PackedScene" uid="uid://ddnpfatnhpbjs" path="res://src/character/styles/base/head_base.tscn" id="6_6gsym"]
[ext_resource type="PackedScene" uid="uid://bh6o0ivr6eucq" path="res://src/character/styles/base/leg_l_base.tscn" id="7_o2u4g"]
[ext_resource type="PackedScene" uid="uid://655nh84fdgg4" path="res://src/character/styles/base/leg_r_base.tscn" id="8_r3ssq"]
[ext_resource type="PackedScene" uid="uid://b6mdjdj6t27lt" path="res://src/character/styles/base/pupil_l_base.tscn" id="9_ghfhl"]
[ext_resource type="PackedScene" uid="uid://dn3ytutkepvws" path="res://src/character/styles/base/pupil_r_base.tscn" id="10_fvmcb"]
[ext_resource type="Script" uid="uid://ekgsgj4smvbr" path="res://src/character/common/style/style.gd" id="11_du3gu"]
[ext_resource type="PackedScene" uid="uid://ccslu0b12mtfa" path="res://src/character/styles/base/torso_base.tscn" id="12_xrsua"]
[ext_resource type="PackedScene" uid="uid://bl2l6bdrpyq1v" path="res://src/world/levels/07_scorched_complex/logic/flashlight/flashlight.tscn" id="13_6pr31"]
[ext_resource type="PackedScene" uid="uid://cgkvddl3qycs1" path="res://src/world/levels/07_scorched_complex/logic/phone/phone.tscn" id="14_01qpr"]
[ext_resource type="PackedScene" uid="uid://xn8dsefh5yvv" path="res://src/world/levels/07_scorched_complex/logic/stealth/ghost_walking/ghost.tscn" id="14_j6ye8"]
[ext_resource type="Script" uid="uid://h51b74w6ojmo" path="res://src/systems/interactables/interactable_dialogue.gd" id="15_jqugv"]
[ext_resource type="PackedScene" uid="uid://g3n4ubd0hrps" path="res://src/world/levels/07_scorched_complex/logic/water_pack/water_pack.tscn" id="15_nqjkh"]
[ext_resource type="Script" uid="uid://b06erqdnqtptw" path="res://src/systems/interactables/interactable_menu.gd" id="18_8nbbm"]
[ext_resource type="Texture2D" uid="uid://bgit8mqhagaxf" path="res://src/world/levels/07_scorched_complex/assets/_common/door.png" id="18_cvigi"]
[ext_resource type="Script" uid="uid://brw3qxymvneca" path="res://src/systems/interactables/interactable_scene_switch.gd" id="18_r3ssq"]
[ext_resource type="Texture2D" uid="uid://bgldae4pg87yj" path="res://src/world/levels/07_scorched_complex/assets/_common/elevator.png" id="19_8nbbm"]
[ext_resource type="Texture2D" uid="uid://by533esb4a1d1" path="res://src/world/levels/07_scorched_complex/assets/lobby/trashcan.png" id="21_evmve"]
[ext_resource type="Texture2D" uid="uid://ckl6fvwqer346" path="res://src/world/levels/07_scorched_complex/assets/lobby/couch.png" id="22_ldfjg"]
[ext_resource type="PackedScene" uid="uid://cdkf8i0ck5o81" path="res://src/world/levels/07_scorched_complex/logic/stealth/ghost_bounds/ghost_bounds.tscn" id="23_xrsua"]
[ext_resource type="Script" uid="uid://bpb7jt42qh7dp" path="res://src/world/levels/07_scorched_complex/logic/pipes/interactable_pipe.gd" id="24_nw762"]
[ext_resource type="Texture2D" uid="uid://dxwiovdebd5v2" path="res://src/world/levels/07_scorched_complex/logic/pipes/pipe_2.png" id="25_wenwj"]
[ext_resource type="Texture2D" uid="uid://dhtflyp25c0by" path="res://src/world/levels/07_scorched_complex/logic/pipes/pipe_1.png" id="26_d5i66"]
[ext_resource type="PackedScene" uid="uid://dxyjfe6h3errq" path="res://src/world/levels/07_scorched_complex/logic/stealth/player_visibility/alerting_object.tscn" id="26_kxgss"]
[ext_resource type="Resource" uid="uid://cyx2lef15qr70" path="res://src/world/levels/07_scorched_complex/dialogue/apartment.dtl" id="26_lnigv"]
[ext_resource type="PackedScene" uid="uid://bo3qq8tjs8ggv" path="res://src/world/levels/07_scorched_complex/logic/stealth/player_visibility/player_visibility.tscn" id="27_cvigi"]
[ext_resource type="Texture2D" uid="uid://baysld717bri5" path="res://src/world/levels/07_scorched_complex/logic/pipes/pipe_0.png" id="27_q2oid"]
[ext_resource type="Script" uid="uid://ddgj0d7l8hicn" path="res://src/systems/lock_and_key.gd" id="28_nw762"]
[ext_resource type="AudioStream" uid="uid://c3k2hlvvx3rlk" path="res://src/world/levels/07_scorched_complex/assets/audio/apartment.ogg" id="32_wenwj"]

[sub_resource type="Resource" id="Resource_n2pch"]
resource_local_to_scene = true
script = ExtResource("11_du3gu")
color_skin = Color(1, 1, 1, 1)
color_head = Color(1, 1, 1, 1)
color_eyelid_r = Color(1, 1, 1, 1)
color_eyelid_l = Color(1, 1, 1, 1)
color_torso = Color(1, 1, 1, 1)
color_hand_r = Color(1, 1, 1, 1)
color_hand_l = Color(1, 1, 1, 1)
color_leg_r = Color(1, 1, 1, 1)
color_leg_l = Color(1, 1, 1, 1)
head = ExtResource("6_6gsym")
eye_r = ExtResource("3_j6ye8")
eye_l = ExtResource("2_6pr31")
pupil_r = ExtResource("10_fvmcb")
pupil_l = ExtResource("9_ghfhl")
torso = ExtResource("12_xrsua")
hand_r = ExtResource("5_jqugv")
hand_l = ExtResource("4_g1v1q")
leg_r = ExtResource("8_r3ssq")
leg_l = ExtResource("7_o2u4g")
metadata/_custom_type_script = "uid://ekgsgj4smvbr"

[node name="Floor2" instance=ExtResource("1_bd5sf")]
scene_name = "floor_2"

[node name="ElevatorMenu" parent="UI" index="0" instance=ExtResource("2_8nbbm")]
visible = false

[node name="DeathByFlyingGhost" parent="UI" index="1" instance=ExtResource("3_q2oid")]
visible = false

[node name="DeathByWalkingGhost" parent="UI" index="2" instance=ExtResource("4_evmve")]
visible = false

[node name="Player" parent="." index="1"]
modulate = Color(0.501961, 0.501961, 0.501961, 1)
style = SubResource("Resource_n2pch")

[node name="Flashlight" parent="Player" index="12" instance=ExtResource("13_6pr31")]

[node name="Phone" parent="Player" index="13" instance=ExtResource("14_01qpr")]

[node name="WaterPack" parent="Player" index="14" instance=ExtResource("15_nqjkh")]

[node name="Environment" parent="." index="3"]
modulate = Color(0.501961, 0.501961, 0.501961, 1)

[node name="BG" type="Parallax2D" parent="Environment" index="0"]

[node name="Midground" type="Parallax2D" parent="Environment" index="1"]

[node name="Door" type="Sprite2D" parent="Environment/Midground" index="0"]
position = Vector2(1527, -198)
texture = ExtResource("18_cvigi")

[node name="Elevator" type="Sprite2D" parent="Environment/Midground" index="1"]
position = Vector2(873, -495)
texture = ExtResource("19_8nbbm")

[node name="Elevator2" type="Sprite2D" parent="Environment/Midground" index="2"]
position = Vector2(-877, -495)
texture = ExtResource("19_8nbbm")

[node name="Hidable" type="Parallax2D" parent="Environment" index="2"]
z_index = 2

[node name="Trashcan" type="Sprite2D" parent="Environment/Hidable" index="0"]
position = Vector2(-573, -79)
texture = ExtResource("21_evmve")

[node name="Trashcan2" type="Sprite2D" parent="Environment/Hidable" index="1"]
position = Vector2(-1373, -84)
texture = ExtResource("21_evmve")

[node name="Trashcan3" type="Sprite2D" parent="Environment/Hidable" index="2"]
position = Vector2(1204, -63)
rotation = 1.57079
texture = ExtResource("21_evmve")

[node name="Trashcan4" type="Sprite2D" parent="Environment/Hidable" index="3"]
position = Vector2(2374, -86)
texture = ExtResource("21_evmve")

[node name="Couch" type="Sprite2D" parent="Environment/Hidable" index="4"]
position = Vector2(-2248, -95)
texture = ExtResource("22_ldfjg")

[node name="GroundLayer" parent="." index="5"]
tile_map_data = PackedByteArray("AADm/wAAAAAAAAAAAADn/wAAAAAAAAAAAADo/wAAAAAAAAAAAADr/wAAAAAAAAAAAADw/wAAAAAAAAAAAADx/wAAAAAAAAAAAADy/wAAAAAAAAAAAADz/wAAAAAAAAAAAAD0/wAAAAAAAAAAAAD1/wAAAAAAAAAAAAD2/wAAAAAAAAAAAAD3/wAAAAAAAAAAAAD4/wAAAAAAAAAAAAD5/wAAAAAAAAAAAAD6/wAAAAAAAAAAAAD7/wAAAAAAAAAAAAD8/wAAAAAAAAAAAAD9/wAAAAAAAAAAAAD+/wAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAPAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAARAAAAAAAAAAAAAAASAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAVAAAAAAAAAAAAAAAWAAAAAAAAAAAAAAAXAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAZAAAAAAAAAAAAAAAaAAAAAAAAAAAAAADY/wAAAAAAAAAAAADZ/wAAAAAAAAAAAADa/wAAAAAAAAAAAADb/wAAAAAAAAAAAADc/wAAAAAAAAAAAADd/wAAAAAAAAAAAADe/wAAAAAAAAAAAADf/wAAAAAAAAAAAADg/wAAAAAAAAAAAADh/wAAAAAAAAAAAADi/wAAAAAAAAAAAADj/wAAAAAAAAAAAADk/wAAAAAAAAAAAADl/wAAAAAAAAAAAAAbAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAdAAAAAAAAAAAAAAAeAAAAAAAAAAAAAAAfAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAhAAAAAAAAAAAAAAAiAAAAAAAAAAAAAAAjAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAlAAAAAAAAAAAAAAAmAAAAAAAAAAAAAAAnAAAAAAAAAAAAAAAoAAAAAAAAAAAAAADt/wAAAAAAAAAAAADu/wAAAAAAAAAAAADv/wAAAAAAAAAAAADs/wAAAAAAAAAAAADp/wAAAAAAAAAAAADq/wAAAAAAAAAAAAA=")

[node name="Interactables" parent="." index="9"]
modulate = Color(0.466181, 0.466181, 0.466181, 1)

[node name="Elevator" type="Node2D" parent="Interactables" index="0"]
position = Vector2(874, 0)

[node name="InteractableMenu" type="Area2D" parent="Interactables/Elevator" index="0" node_paths=PackedStringArray("target")]
collision_layer = 8
script = ExtResource("18_8nbbm")
menu_path = NodePath("../../../UI/ElevatorMenu")
target = NodePath("..")
metadata/_custom_type_script = "uid://b06erqdnqtptw"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Interactables/Elevator/InteractableMenu" index="0"]
polygon = PackedVector2Array(-120, -8, -124, -347, 125, -348, 129, -165, 171, -159, 169, -71, 131, -70, 135, -5)

[node name="Room" type="Node2D" parent="Interactables" index="1"]
position = Vector2(1517, 0)

[node name="InteractableSceneSwitch" type="Area2D" parent="Interactables/Room" index="0" node_paths=PackedStringArray("target")]
collision_layer = 8
script = ExtResource("18_r3ssq")
scene_name = "floor_2_room"
target = NodePath("..")
metadata/_custom_type_script = "uid://brw3qxymvneca"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Interactables/Room/InteractableSceneSwitch" index="0"]
polygon = PackedVector2Array(-120, -8, -119, -374, 143, -372, 135, -5)

[node name="Pipes" type="Sprite2D" parent="Interactables" index="2"]
position = Vector2(-1361, -332)
texture = ExtResource("25_wenwj")

[node name="InteractablePipe" type="Area2D" parent="Interactables/Pipes" index="0" node_paths=PackedStringArray("target")]
position = Vector2(114, 328)
collision_layer = 8
script = ExtResource("24_nw762")
pipe_number = 2
progress_textures = Array[Texture2D]([ExtResource("25_wenwj"), ExtResource("26_d5i66"), ExtResource("27_q2oid")])
target = NodePath("..")
metadata/_custom_type_script = "uid://d16v85ddrosp1"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Interactables/Pipes/InteractablePipe" index="0"]
polygon = PackedVector2Array(-43, -32, -52, -537, 35, -524, 32, -39)

[node name="InteractableDialogue" type="Area2D" parent="Interactables/Pipes" index="1" node_paths=PackedStringArray("target")]
position = Vector2(114, 328)
collision_layer = 8
script = ExtResource("15_jqugv")
timeline = ExtResource("26_lnigv")
labels = Dictionary[String, String]({
"07_started": "pipes"
})
text_bubble_markers = Array[NodePath]([NodePath("../../../Player/TextBubbleMarker")])
target = NodePath("..")
metadata/_custom_type_script = "uid://h51b74w6ojmo"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Interactables/Pipes/InteractableDialogue" index="0"]
polygon = PackedVector2Array(-43, -32, -52, -537, 35, -524, 32, -39)

[node name="AlertingObject" parent="Interactables/Pipes" index="2" instance=ExtResource("26_kxgss")]
alert_radius = 1400.0

[node name="LockAndKey" type="Node" parent="Interactables/Pipes" index="3" node_paths=PackedStringArray("lock")]
script = ExtResource("28_nw762")
key = "07_wrench"
lock = NodePath("../InteractableDialogue")
metadata/_custom_type_script = "uid://ddgj0d7l8hicn"

[node name="Ghost" parent="." index="10" instance=ExtResource("14_j6ye8")]
position = Vector2(-1677, 0)

[node name="Ghost2" parent="." index="11" instance=ExtResource("14_j6ye8")]
position = Vector2(1899, -10)
walk_time = 24.0

[node name="PlayerVisibility" parent="." index="12" instance=ExtResource("27_cvigi")]
unique_name_in_owner = true

[node name="CollisionPolygon2D" parent="PlayerVisibility/CrouchHidden" index="0"]
polygon = PackedVector2Array(-2349, 127, -2355, -181, -2151, -160, -2147, 93, -1423, 106, -1412, -173, -1315, -168, -1310, 115, -623, 108, -620, -162, -523, -158, -492, 111, 1127, 101, 1127, -110, 1290, -120, 1300, 104, 2318, 94, 2329, -158, 2422, -155, 2439, 225)

[node name="GhostBounds" parent="." index="13" instance=ExtResource("23_xrsua")]

[node name="InteriorAmbiance" type="AudioStreamPlayer" parent="." index="14"]
process_mode = 3
stream = ExtResource("32_wenwj")
autoplay = true
bus = &"Music"

[editable path="PlayerVisibility"]
