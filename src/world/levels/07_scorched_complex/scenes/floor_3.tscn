[gd_scene load_steps=33 format=4 uid="uid://ctwp3bgyufv2r"]

[ext_resource type="PackedScene" uid="uid://dwapdsx6u217o" path="res://src/world/common/scene/scene.tscn" id="1_c1rtu"]
[ext_resource type="PackedScene" uid="uid://tem7qe8rdwgl" path="res://src/character/styles/base/eye_l_base.tscn" id="2_2bkaq"]
[ext_resource type="PackedScene" uid="uid://do5c1yd8gj6ts" path="res://src/world/levels/07_scorched_complex/menus/elevator/elevator_menu.tscn" id="2_6sblu"]
[ext_resource type="PackedScene" uid="uid://deqdhg7d7px4r" path="res://src/character/styles/base/eye_r_base.tscn" id="3_gj68f"]
[ext_resource type="PackedScene" uid="uid://b5nv4hta6iqmd" path="res://src/world/levels/07_scorched_complex/logic/stealth/game_over/death_by_flying_ghost.tscn" id="3_n4hks"]
[ext_resource type="PackedScene" uid="uid://dfj53lpxv6wc8" path="res://src/character/styles/base/hand_l_base.tscn" id="4_iqj0t"]
[ext_resource type="PackedScene" uid="uid://c4qqlg68xrjw2" path="res://src/world/levels/07_scorched_complex/logic/stealth/game_over/death_by_walking_ghost.tscn" id="4_ixgep"]
[ext_resource type="PackedScene" uid="uid://c7xsd06q4xeea" path="res://src/character/styles/base/hand_r_base.tscn" id="5_y4wlt"]
[ext_resource type="PackedScene" uid="uid://ddnpfatnhpbjs" path="res://src/character/styles/base/head_base.tscn" id="6_6e1bj"]
[ext_resource type="PackedScene" uid="uid://bh6o0ivr6eucq" path="res://src/character/styles/base/leg_l_base.tscn" id="7_vryue"]
[ext_resource type="PackedScene" uid="uid://655nh84fdgg4" path="res://src/character/styles/base/leg_r_base.tscn" id="8_dbdkb"]
[ext_resource type="PackedScene" uid="uid://b6mdjdj6t27lt" path="res://src/character/styles/base/pupil_l_base.tscn" id="9_tc33d"]
[ext_resource type="PackedScene" uid="uid://dn3ytutkepvws" path="res://src/character/styles/base/pupil_r_base.tscn" id="10_5q4fp"]
[ext_resource type="Script" uid="uid://ekgsgj4smvbr" path="res://src/character/common/style/style.gd" id="11_w5jfx"]
[ext_resource type="PackedScene" uid="uid://ccslu0b12mtfa" path="res://src/character/styles/base/torso_base.tscn" id="12_inldl"]
[ext_resource type="Script" uid="uid://brw3qxymvneca" path="res://src/systems/interactables/interactable_scene_switch.gd" id="13_gj68f"]
[ext_resource type="PackedScene" uid="uid://cgkvddl3qycs1" path="res://src/world/levels/07_scorched_complex/logic/phone/phone.tscn" id="13_tc33d"]
[ext_resource type="PackedScene" uid="uid://g3n4ubd0hrps" path="res://src/world/levels/07_scorched_complex/logic/water_pack/water_pack.tscn" id="14_5q4fp"]
[ext_resource type="Script" uid="uid://byyuugyltgunu" path="res://src/systems/polygon_copier.gd" id="14_iqj0t"]
[ext_resource type="Script" uid="uid://h51b74w6ojmo" path="res://src/systems/interactables/interactable_dialogue.gd" id="15_6e1bj"]
[ext_resource type="PackedScene" uid="uid://xn8dsefh5yvv" path="res://src/world/levels/07_scorched_complex/logic/stealth/ghost_walking/ghost.tscn" id="15_iqj0t"]
[ext_resource type="Resource" uid="uid://cyx2lef15qr70" path="res://src/world/levels/07_scorched_complex/dialogue/apartment.dtl" id="16_vryue"]
[ext_resource type="Texture2D" uid="uid://bgit8mqhagaxf" path="res://src/world/levels/07_scorched_complex/assets/_common/door.png" id="17_n4hks"]
[ext_resource type="Script" uid="uid://ddgj0d7l8hicn" path="res://src/systems/lock_and_key.gd" id="17_vryue"]
[ext_resource type="Texture2D" uid="uid://bgldae4pg87yj" path="res://src/world/levels/07_scorched_complex/assets/_common/elevator.png" id="18_ixgep"]
[ext_resource type="Texture2D" uid="uid://by533esb4a1d1" path="res://src/world/levels/07_scorched_complex/assets/lobby/trashcan.png" id="20_m7s7a"]
[ext_resource type="Texture2D" uid="uid://ckl6fvwqer346" path="res://src/world/levels/07_scorched_complex/assets/lobby/couch.png" id="21_uxc22"]
[ext_resource type="Script" uid="uid://b06erqdnqtptw" path="res://src/systems/interactables/interactable_menu.gd" id="22_850b1"]
[ext_resource type="PackedScene" uid="uid://bo3qq8tjs8ggv" path="res://src/world/levels/07_scorched_complex/logic/stealth/player_visibility/player_visibility.tscn" id="22_w5jfx"]
[ext_resource type="PackedScene" uid="uid://cdkf8i0ck5o81" path="res://src/world/levels/07_scorched_complex/logic/stealth/ghost_bounds/ghost_bounds.tscn" id="23_inldl"]
[ext_resource type="AudioStream" uid="uid://c3k2hlvvx3rlk" path="res://src/world/levels/07_scorched_complex/assets/audio/apartment.ogg" id="27_hxuyu"]

[sub_resource type="Resource" id="Resource_n2pch"]
resource_local_to_scene = true
script = ExtResource("11_w5jfx")
color_skin = Color(1, 1, 1, 1)
color_head = Color(1, 1, 1, 1)
color_eyelid_r = Color(1, 1, 1, 1)
color_eyelid_l = Color(1, 1, 1, 1)
color_torso = Color(1, 1, 1, 1)
color_hand_r = Color(1, 1, 1, 1)
color_hand_l = Color(1, 1, 1, 1)
color_leg_r = Color(1, 1, 1, 1)
color_leg_l = Color(1, 1, 1, 1)
head = ExtResource("6_6e1bj")
eye_r = ExtResource("3_gj68f")
eye_l = ExtResource("2_2bkaq")
pupil_r = ExtResource("10_5q4fp")
pupil_l = ExtResource("9_tc33d")
torso = ExtResource("12_inldl")
hand_r = ExtResource("5_y4wlt")
hand_l = ExtResource("4_iqj0t")
leg_r = ExtResource("8_dbdkb")
leg_l = ExtResource("7_vryue")
metadata/_custom_type_script = "uid://ekgsgj4smvbr"

[node name="Floor3" instance=ExtResource("1_c1rtu")]
scene_name = "floor_3"

[node name="ElevatorMenu" parent="UI" index="0" instance=ExtResource("2_6sblu")]
visible = false

[node name="DeathByFlyingGhost" parent="UI" index="1" instance=ExtResource("3_n4hks")]
visible = false

[node name="DeathByWalkingGhost" parent="UI" index="2" instance=ExtResource("4_ixgep")]
visible = false

[node name="Player" parent="." index="1"]
modulate = Color(0.501961, 0.501961, 0.501961, 1)
style = SubResource("Resource_n2pch")

[node name="Phone" parent="Player" index="12" instance=ExtResource("13_tc33d")]

[node name="WaterPack" parent="Player" index="13" instance=ExtResource("14_5q4fp")]

[node name="Environment" parent="." index="3"]
modulate = Color(0.501961, 0.501961, 0.501961, 1)

[node name="BG" type="Parallax2D" parent="Environment" index="0"]

[node name="Midground" type="Parallax2D" parent="Environment" index="1"]

[node name="Door" type="Sprite2D" parent="Environment/Midground" index="0"]
position = Vector2(1526, -198)
texture = ExtResource("17_n4hks")

[node name="Door2" type="Sprite2D" parent="Environment/Midground" index="1"]
position = Vector2(-2391, -198)
texture = ExtResource("17_n4hks")

[node name="Elevator" type="Sprite2D" parent="Environment/Midground" index="2"]
position = Vector2(873, -495)
texture = ExtResource("18_ixgep")

[node name="Elevator2" type="Sprite2D" parent="Environment/Midground" index="3"]
position = Vector2(-877, -495)
texture = ExtResource("18_ixgep")

[node name="Hidable" type="Parallax2D" parent="Environment" index="2"]
z_index = 2

[node name="Trashcan2" type="Sprite2D" parent="Environment/Hidable" index="0"]
position = Vector2(-1235, -84)
texture = ExtResource("20_m7s7a")

[node name="Trashcan3" type="Sprite2D" parent="Environment/Hidable" index="1"]
position = Vector2(1204, -63)
rotation = 1.57079
texture = ExtResource("20_m7s7a")

[node name="Trashcan4" type="Sprite2D" parent="Environment/Hidable" index="2"]
position = Vector2(2374, -86)
texture = ExtResource("20_m7s7a")

[node name="Couch" type="Sprite2D" parent="Environment/Hidable" index="3"]
position = Vector2(-2063, -92)
texture = ExtResource("21_uxc22")

[node name="GroundLayer" parent="." index="5"]
tile_map_data = PackedByteArray("AADY/wAAAAAAAAAAAADZ/wAAAAAAAAAAAADa/wAAAAAAAAAAAADb/wAAAAAAAAAAAADc/wAAAAAAAAAAAADe/wAAAAAAAAAAAADf/wAAAAAAAAAAAADg/wAAAAAAAAAAAADi/wAAAAAAAAAAAADj/wAAAAAAAAAAAADk/wAAAAAAAAAAAADl/wAAAAAAAAAAAADn/wAAAAAAAAAAAADo/wAAAAAAAAAAAADp/wAAAAAAAAAAAADr/wAAAAAAAAAAAADs/wAAAAAAAAAAAADt/wAAAAAAAAAAAADv/wAAAAAAAAAAAADw/wAAAAAAAAAAAADx/wAAAAAAAAAAAADz/wAAAAAAAAAAAAD0/wAAAAAAAAAAAAD1/wAAAAAAAAAAAAD3/wAAAAAAAAAAAAD6/wAAAAAAAAAAAAD7/wAAAAAAAAAAAAD8/wAAAAAAAAAAAAD9/wAAAAAAAAAAAAD+/wAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAPAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAARAAAAAAAAAAAAAAASAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAVAAAAAAAAAAAAAAAWAAAAAAAAAAAAAAAXAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAZAAAAAAAAAAAAAAAaAAAAAAAAAAAAAAAbAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAdAAAAAAAAAAAAAAAeAAAAAAAAAAAAAAAfAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAhAAAAAAAAAAAAAAAiAAAAAAAAAAAAAAAjAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAlAAAAAAAAAAAAAAAmAAAAAAAAAAAAAAAnAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAA=")

[node name="Room" type="Node2D" parent="Interactables" index="0"]
position = Vector2(1517, 0)

[node name="InteractableSceneSwitch" type="Area2D" parent="Interactables/Room" index="0" node_paths=PackedStringArray("target")]
collision_layer = 8
script = ExtResource("13_gj68f")
scene_name = "floor_3_room"
target = NodePath("..")
metadata/_custom_type_script = "uid://brw3qxymvneca"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Interactables/Room/InteractableSceneSwitch" index="0"]
polygon = PackedVector2Array(-120, -8, -120, -377, 137, -370, 135, -5)

[node name="Bathroom" type="Node2D" parent="Interactables" index="1"]
position = Vector2(-2398, 0)

[node name="InteractableSceneSwitch" type="Area2D" parent="Interactables/Bathroom" index="0" node_paths=PackedStringArray("target")]
collision_layer = 8
script = ExtResource("13_gj68f")
scene_name = "bathroom"
target = NodePath("..")
metadata/_custom_type_script = "uid://brw3qxymvneca"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Interactables/Bathroom/InteractableSceneSwitch" index="0"]
polygon = PackedVector2Array(-120, -8, -124, -371, 139, -368, 135, -5)
script = ExtResource("14_iqj0t")
target = NodePath("../..")

[node name="InteractableDialogue" type="Area2D" parent="Interactables/Bathroom" index="1" node_paths=PackedStringArray("target")]
collision_layer = 8
script = ExtResource("15_6e1bj")
timeline = ExtResource("16_vryue")
labels = Dictionary[String, String]({
"07_started": "mold"
})
text_bubble_markers = Array[NodePath]([NodePath("../../../Player/TextBubbleMarker")])
target = NodePath("..")
metadata/_custom_type_script = "uid://h51b74w6ojmo"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Interactables/Bathroom/InteractableDialogue" index="0"]
polygon = PackedVector2Array(-120, -8, -124, -371, 139, -368, 135, -5)
script = ExtResource("14_iqj0t")
target = NodePath("../..")

[node name="KeyAndLock" type="Node" parent="Interactables/Bathroom" index="2" node_paths=PackedStringArray("lock")]
script = ExtResource("17_vryue")
key = "07_respirator"
lock = NodePath("../InteractableDialogue")
metadata/_custom_type_script = "uid://ddgj0d7l8hicn"

[node name="Elevator" type="Node2D" parent="Interactables" index="2"]
position = Vector2(874, 0)

[node name="InteractableMenu" type="Area2D" parent="Interactables/Elevator" index="0" node_paths=PackedStringArray("target")]
collision_layer = 8
script = ExtResource("22_850b1")
menu_path = NodePath("../../../UI/ElevatorMenu")
target = NodePath("..")
metadata/_custom_type_script = "uid://b06erqdnqtptw"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Interactables/Elevator/InteractableMenu" index="0"]
polygon = PackedVector2Array(-120, -8, -124, -347, 125, -348, 129, -165, 171, -159, 169, -71, 131, -70, 135, -5)

[node name="Ghost" parent="Interactables" index="3" instance=ExtResource("15_iqj0t")]
position = Vector2(-1683, -11)
walk_time = 17.0

[node name="Ghost2" parent="Interactables" index="4" instance=ExtResource("15_iqj0t")]
position = Vector2(1898, -13)
walk_time = 25.5

[node name="PlayerVisibility" parent="." index="10" instance=ExtResource("22_w5jfx")]
unique_name_in_owner = true

[node name="CollisionPolygon2D" parent="PlayerVisibility/CrouchHidden" index="0"]
polygon = PackedVector2Array(-2180, 184, -2180, -204, -1964, -177, -1960, 157, -1284, 134, -1296, -173, -1189, -170, -1193, 115, 1123, 89, 1120, -113, 1291, -113, 1291, 180, 2339, 77, 2327, -181, 2434, -173, 2437, 218, -2192, 282)

[node name="GhostBounds" parent="." index="11" instance=ExtResource("23_inldl")]

[node name="InteriorAmbiance" type="AudioStreamPlayer" parent="." index="12"]
process_mode = 3
stream = ExtResource("27_hxuyu")
autoplay = true
bus = &"Music"

[editable path="PlayerVisibility"]
